<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>PlUnit Tests and Production Systems (SICStus Prolog)</title>

<meta name="description" content="PlUnit Tests and Production Systems (SICStus Prolog)">
<meta name="keywords" content="PlUnit Tests and Production Systems (SICStus Prolog)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Predicate-Index.html#Predicate-Index" rel="index" title="Predicate Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="lib_002dplunit.html#lib_002dplunit" rel="up" title="lib-plunit">
<link href="lib_002dprocess.html#lib_002dprocess" rel="next" title="lib-process">
<link href="PlUnit-Running-the-Test_002dSuite.html#PlUnit-Running-the-Test_002dSuite" rel="prev" title="PlUnit Running the Test-Suite">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


<link href="texinfo.css" rel="stylesheet" type="text/css">
</head>

<body lang="en">
<a name="PlUnit-Tests-and-Production-Systems"></a>
<hr>
<a name="Tests-and-Production-Systems"></a>
<h4 class="subsection">10.33.5 Tests and Production Systems</h4>

<p>Most applications do not want the test-suite to end up in the
final application.  There are several ways to achieve this.  One way
is to place all tests in separate files and not to load the tests
when creating the production environment.  Another way is to wrap
each unit test box in a pair of <code>:- if(&hellip;)</code>, <code>:- endif</code> directives.
For example, the test could be whether the <code>plunit</code> module has been
loaded:
</p>
<div class="example">
<pre class="example">:- if(current_module(plunit)).
:- begin_tests(<var>Unit</var>[,<var>Options</var>]).
&hellip;
:- end_tests(<var>Unit</var>).
:- endif.
</pre></div>

<p>Alternatively, you can reserve a system property
e.g. <code>enable_unit_tests</code> to control whether unit tests should be
enabled.  The property is enabled if you run SICStus Prolog as:
</p>
<div class="example">
<pre class="example">% sicstus -Denable_unit_tests=true
</pre></div>

<p>Then your Prolog source file could have the structure:
</p>
<div class="example">
<pre class="example">:- use_module(library(system), [environ/2]).

&hellip;

:- if(environ(enable_unit_tests, true)).
:- use_module(library(plunit)).
:- begin_tests(<var>Unit</var>[,<var>Options</var>])
&hellip;
:- end_tests(<var>Unit</var>)
:- endif.
</pre></div>





<div class="logo">
<a href="https://sicstus.sics.se/">
<table><tr><td>&nbsp;</td></tr></table>
</a>
</div>
<div class="node">
<ul class="node">
<li><a href="index.html#Top">User's Manual</a>
<hr>
<li><a href="index.html#TOC">Table of Contents</a>
<li><a href="PlUnit-Running-the-Test_002dSuite.html#PlUnit-Running-the-Test_002dSuite" accesskey="p" rel="prev">Previous</a>
<li><a href="lib_002dplunit.html#lib_002dplunit" accesskey="u" rel="up">Up</a>
</ul>
</div>
<hr>
<a HREF="mailto:sicstus-support@ri.se?subject=Documentation%20feedback%20on%20html/sicstus/PlUnit-Tests-and-Production-Systems.html&amp;body=Feedback%20on%20documentation%20node%20html/sicstus/PlUnit-Tests-and-Production-Systems.html%20in%20User's%20Manual.">Send feedback on this subject.</a>
</body>
</html>
